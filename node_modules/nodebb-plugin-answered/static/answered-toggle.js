$(document).ready(function() {
    $('#toggleAnsweredBtn').on('click', function() {
      const $btn = $(this);
      const markAnswered = $btn.text().trim().toLowerCase().includes('answered');
      const tid = ajaxify.data.tid;  // NodeBB's global topic data (topic ID)
  
      // Disable button to avoid multiple clicks
      $btn.prop('disabled', true);
  
      $.ajax({
        url: `${config.relative_path}/api/topic/${tid}/answer-status`,
        type: 'PUT',
        data: { answered: markAnswered },
        success: function(response) {
          // Update label and button text based on new status
          if (markAnswered) {
            $('.answered-label').removeClass('text-danger').addClass('text-success').text('Answered');
            $btn.text('Mark Unanswered');
          } else {
            $('.answered-label').removeClass('text-success').addClass('text-danger').text('Unanswered');
            $btn.text('Mark Answered');
          }
        },
        error: function(xhr) {
          console.error('Error toggling answer status:', xhr.responseText);
          alert('Could not update status. Please try again.');
        },
        complete: function() {
          $btn.prop('disabled', false);
        }
      });
    });
  });
  